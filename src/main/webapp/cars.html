<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    </head>
    <body>
        <table class="table">
            <thead id="headers">
                <tr>
                </tr>
            </thead>
            <tbody id="tbody">

            </tbody>
        </table>
        
        <input type="text" id="price" name="price">
        <button id="filterPrice" onclick="getCars()">Price less than</button>
        
        <input type="text" id="year" name="price">
        <button id="filterPrice" onclick="getCars()">Price less than</button>

        <script>
            getCars();
            function getCars() {
                fetch("api/cars/all")
                        .then(res => res.json())
                        .then(data => {
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            console.log("-------------------------------------------------------" + data[1].name)
                            line = "<table class=\"table table-dark\">" + "<thead class=\"thead-dark\">" + "<tr>" + "<th scope=\"col\">ID</th>" + "<th scope=\"col\">Year</th>"
                            + "<th scope=\"col\">Make</th>" + "<th scope=\"col\">Model</th>" + "<th scope=\"col\">Price</th>" + "</tr>" + "</thead>" + "<tbody>"
                            var cars = data.map((c) => {
                                line = line + "<tr>" + "<td>" + c.id + "</td>" + "<td>" + c.year + "</td>" + "<td>" + c.make + "</td>" +
                                    "<td>" + c.model + "</td>" + "<td>" + c.price + "</td>" + "</tr>"
                                    return line;
                            })
                            cars = line + "</tr>" + "</tbody>" + "</table>"
                            console.log(cars)
                            document.getElementById("tbody").innerHTML = line;
                        });
            }

            //Ikke lavet
            function findPrice() {
                console.log(document.getElementById("price").value)
                
                var lowPrice = [];
                
              
                for (var i = 0; i < cars.length; i++) {
                    if (cars[i].price < document.getElementById("price").value) {
                        lowPrice.push(cars[i]);
                    }
                }
                console.log(lowPrice);
                cars = lowPrice;
                displayCars();
             
            }

        </script>

        <a href="index.html">Index</a>
    </body>
</html>
